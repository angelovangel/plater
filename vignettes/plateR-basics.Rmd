---
title: "Getting started with `plateR`"
author: "Sean Hughes"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
```{r, echo = FALSE}
# print results of code using #>
knitr::opts_chunk$set(collapse = TRUE, comment = "#>")
```


## File structure 

When you installed `plateR`, several example .csv files were installed. Let's look at them briefly to see how the files should be structured. To find out where the files are stored on your computer, run this code.   

```{r}
# get the file path to the folder
library(plateR)
system.file("extdata", package = "plateR")
```

Now, open up the appropriate folder on your computer. You will see five files: 

- bacterial-killing.csv
- concentrations.csv
- samples.csv
- treatments.csv
- viability.csv

Open samples.csv in a spreadsheet application. 

<insert overview of file structure>

Close that file and open concentrations.csv. 
<illustrates that wells can be blank>


## Starting from scratch: Reading in the files
```{r}
bk <- system.file("extdata", "bacterial-killing.csv", package = "plateR")
concentrations <- system.file("extdata", "concentrations.csv", package = "plateR")
samples <- system.file("extdata", "samples.csv", package = "plateR")
treatments <- system.file("extdata", "treatments.csv", package = "plateR")
viability <- system.file("extdata", "viability.csv", package = "plateR")
   
data <- read_plate(plate_size = 96, # total number of wells on the plate
      well_ids_column = "Wells",    # name to give column of well IDs
      file_names =                  # full paths to the .csv files
         c(bk, concentrations, samples, treatments, viability), 
      column_names =                # names to give each new column
         c("BacterialKilling", "Concentration", "Sample", "Treatment", 
            "Viability"))
str(data)
```

To check that the new data frame matched everything up as we expected, we can use `plateR::view_plate()`. 

```{r}
view_plate(plate_size = 96, 
      data = data,                         # data frame of interest
      well_ids_column = "Wells",           # name of the column with the well IDs
      column_to_display = "Concentration")   

view_plate(96, data, "Wells", "Treatment")
```


# Starting with some data: Reading in the files



--------------------------------------------------------------------------------



Vignettes are long form documentation commonly included in packages. Because they are part of the distribution of the package, they need to be as compact as possible. The `html_vignette` output type provides a custom style sheet (and tweaks some options) to ensure that the resulting html is as small as possible. The `html_vignette` format:

- Never uses retina figures
- Has a smaller default figure size
- Uses a custom CSS stylesheet instead of the default Twitter Bootstrap style

## Vignette Info

Note the various macros within the `vignette` setion of the metadata block above. These are required in order to instruct R how to build the vignette. Note that you should change the `title` field and the `\VignetteIndexEntry` to match the title of your vignette.

## Styles

The `html_vignette` template includes a basic CSS theme. To override this theme you can specify your own CSS in the document metadata as follows:

    output: 
      rmarkdown::html_vignette:
        css: mystyles.css

## Figures

The figure sizes have been customised so that you can easily put two images side-by-side. 

```{r, fig.show='hold'}
plot(1:10)
plot(10:1)
```

You can enable figure captions by `fig_caption: yes` in YAML:

    output:
      rmarkdown::html_vignette:
        fig_caption: yes

Then you can use the chunk option `fig.cap = "Your figure caption."` in **knitr**.

## More Examples

You can write math expressions, e.g. $Y = X\beta + \epsilon$, footnotes^[A footnote here.], and tables, e.g. using `knitr::kable()`.

```{r, echo=FALSE, results='asis'}
knitr::kable(head(mtcars, 10))
```

Also a quote using `>`:

> "He who gives up [code] safety for [code] speed deserves neither."
([via](https://twitter.com/hadleywickham/status/504368538874703872))
