<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Sean Hughes" />

<meta name="date" content="2016-03-21" />

<title>Getting started with plateR</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0A%7D%0Apre%20%7B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>



<div id="header">
<h1 class="title">Getting started with <code>plateR</code></h1>
<h4 class="author"><em>Sean Hughes</em></h4>
<h4 class="date"><em>2016-03-21</em></h4>
</div>


<div id="how-plater-helps-you" class="section level2">
<h2>How <code>plateR</code> helps you</h2>
<p>When you do an experiment in a plate, it’s easy and intuitive to store the data you get and a description of the experiment (what wells were controls, what wells were experimental, etc) in the shape of a plate. But turning that into a machine-readable format involves complicated mental gymnastics and error-prone copy-and-pasting.</p>
<p>What <code>plateR</code> provides is a systematic format for storing information in plate layouts and then functions that painlessly rearrange that intuitive file into a data frame with one well per row, which is ideal for analysis.</p>
<p>There are just two simple steps:</p>
<ol style="list-style-type: decimal">
<li>Put the data in a file in <code>plateR</code> format</li>
<li>Read in the data with <code>read_plate</code> or <code>add_plate</code> depending on your situation</li>
</ol>
</div>
<div id="the-example" class="section level2">
<h2>The example</h2>
<p>Imagine you’ve invented two new antibiotics. To show how well they work, you filled up a 96-well plate with dilutions of them and mixed in four different types of bacteria. Then, you measured how many of the bacteria got killed. So for each well in the plate you know:</p>
<ul>
<li>The drug (A or B)</li>
<li>The concentration of drug (100 uM to 0.01 nM and no drug)</li>
<li>The bacterial species (E. coli, S. enterocolitis, C. trachomatis, and N. gonorrhoeae)</li>
<li>The amount of killing in the well</li>
</ul>
<p>The first three items are variables you chose in setting up the experiment. The fourth item is what you measured.</p>
<p>We will analyze this experiment two different ways to illustrate two common data analysis scenarios:</p>
<ol style="list-style-type: decimal">
<li>Assuming the instrument gives back data shaped like a plate, we’ll create one file with all four variables and read it in with <code>read_plate()</code>.</li>
<li>Assuming the instrument gives back data in one-well-per-row format, we’ll create two files–one with the data and one with the three variables–and then combine the files with <code>add_plate()</code>.</li>
</ol>
</div>
<div id="step-1-put-the-data-in-plater-format" class="section level2">
<h2>Step 1: Put the data in <code>plateR</code> format</h2>
<p>The first step is to create a file for the experiment. <code>plateR</code> format is designed to store all the plate-shaped information about an experiment in a single file. It’s simply a .csv file representing a single plate, containing one or more plate layouts. Each layout maps a single variable, so for the example experiment, there would be four layouts in the file: Drug, Concentration, Bacteria, and Killing. Alternatively, if the Killing data are in one-well-per-row format, there would only be three layouts in the file.</p>
<p>Several examples came with the package. Load <code>plateR</code> (i.e. run <code>library(plateR)</code>) and then run <code>system.file(&quot;extdata&quot;, package = &quot;plateR&quot;)</code>. Open the folder listed there and then open <code>example-1.csv</code> in a spreadsheet editor. As you can see, there are four layouts in the file, describing the four variables in the experiment.</p>
<p>The format is pretty simple:</p>
<ul>
<li>.csv file</li>
<li>Top left cell of each layout is the name</li>
<li>The rest of the top row of each layout is the column numbers (1:12 for a 96-well plate)</li>
<li>The rest of the left column is the row names (A:H for a 96-well plate)</li>
<li>One line between layouts</li>
</ul>
<p>You can use <code>plateR</code> format with any standard plate size (6 to 384 wells). Not every well has to be filled in every layout. If a well is blank in every layout in a file, it’s omitted. If it’s blank in some but not others, it’ll get <code>NA</code> where it’s blank.</p>
</div>
<div id="step-2-read-in-the-data" class="section level2">
<h2>Step 2: Read in the data</h2>
<p>Now that your file is set up, you’re ready to read in the data.</p>
<p>Again, we will show two examples:</p>
<ol style="list-style-type: decimal">
<li>A single <code>plateR</code> format file with <code>read_plate()</code></li>
<li>A one-well-per-row file and a <code>plateR</code> format file with <code>add_plate()</code></li>
</ol>
<div id="step-2-read-a-single-plater-format-file-with-read_plate" class="section level3">
<h3>Step 2: Read a single <code>plateR</code> format file with <code>read_plate()</code></h3>
<p>Here is how it works. (Note that below we use <code>system.file()</code> here to get the file path of the example file, but for your own files you would specify the file path without using <code>system.file()</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">file_path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;example-1.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;plateR&quot;</span>)
   
data &lt;-<span class="st"> </span><span class="kw">read_plate</span>(
      <span class="dt">file =</span> file_path,             <span class="co"># full path to the .csv file</span>
      <span class="dt">well_ids_column =</span> <span class="st">&quot;Wells&quot;</span>,    <span class="co"># name to give column of well IDs (optional)</span>
      <span class="dt">plate_size =</span> <span class="dv">96</span>               <span class="co"># total number of wells on the plate (optional)</span>
)
<span class="kw">str</span>(data)
<span class="co">#&gt; 'data.frame':    96 obs. of  5 variables:</span>
<span class="co">#&gt;  $ Wells        : chr  &quot;A01&quot; &quot;A02&quot; &quot;A03&quot; &quot;A04&quot; ...</span>
<span class="co">#&gt;  $ Drug         : chr  &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...</span>
<span class="co">#&gt;  $ Concentration: num  1.00e+02 2.00e+01 4.00 8.00e-01 1.60e-01 3.20e-02 6.40e-03 1.28e-03 2.56e-04 5.12e-05 ...</span>
<span class="co">#&gt;  $ Bacteria     : chr  &quot;E. coli&quot; &quot;E. coli&quot; &quot;E. coli&quot; &quot;E. coli&quot; ...</span>
<span class="co">#&gt;  $ Killing      : num  98 95 92 41 17 2 1.5 1.8 1 0.5 ...</span>

<span class="kw">head</span>(data)
<span class="co">#&gt;   Wells Drug Concentration Bacteria Killing</span>
<span class="co">#&gt; 1   A01    A       100.000  E. coli      98</span>
<span class="co">#&gt; 2   A02    A        20.000  E. coli      95</span>
<span class="co">#&gt; 3   A03    A         4.000  E. coli      92</span>
<span class="co">#&gt; 4   A04    A         0.800  E. coli      41</span>
<span class="co">#&gt; 5   A05    A         0.160  E. coli      17</span>
<span class="co">#&gt; 6   A06    A         0.032  E. coli       2</span></code></pre></div>
<p>So what happened? <code>read_plate()</code> read in the <code>plateR</code> format file you created and turned each layout into a column, using the name of the layout specified in the file. So you have four columns: Drug, Concentration, Bacteria, and Killing. It additionally creates a column named “Wells” with the well identifiers for each well. Now, each well is represented by a single row, with the values indicated in the file for each column.</p>
</div>
<div id="step-2-again-combine-a-one-well-per-row-file-and-a-plater-format-file-with-add_plate" class="section level3">
<h3>Step 2 (again): Combine a one-well-per-row file and a <code>plateR</code> format file with <code>add_plate()</code></h3>
<p>Scientific instruments that work on plates often provide data in the shape of a plate. In that case, you’re all set to create a <code>plateR</code> format file as described above. Sometimes, though, you’ll get data back formatted with one well per row. In that case, you’d either need to copy-and-paste the data into a plate layout to use <code>read_plate()</code> or you’d need to copy-and-paste all the other information (Drug, Concentration, Bacteria) to line up with the data.</p>
<p><code>add_plate()</code> solves this problem. You provide a data frame with one well per row and well IDs and then you provide a <code>plateR</code> format file with the other information and <code>add_plate()</code> knits them together well-by-well. Here’s an example using the other two files installed along with <code>plateR</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">file2A &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;example-2-part-A.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;plateR&quot;</span>)
data2 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(file2A)

<span class="kw">str</span>(data2)
<span class="co">#&gt; 'data.frame':    96 obs. of  2 variables:</span>
<span class="co">#&gt;  $ Wells  : Factor w/ 96 levels &quot;A01&quot;,&quot;A02&quot;,&quot;A03&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ Killing: num  98 95 92 41 17 2 1.5 1.8 1 0.5 ...</span>

<span class="kw">head</span>(data2)
<span class="co">#&gt;   Wells Killing</span>
<span class="co">#&gt; 1   A01      98</span>
<span class="co">#&gt; 2   A02      95</span>
<span class="co">#&gt; 3   A03      92</span>
<span class="co">#&gt; 4   A04      41</span>
<span class="co">#&gt; 5   A05      17</span>
<span class="co">#&gt; 6   A06       2</span>

meta &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;example-2-part-B.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;plateR&quot;</span>)
data2 &lt;-<span class="st"> </span><span class="kw">add_plate</span>(
      <span class="dt">file =</span> meta,                <span class="co"># full path to the .csv file</span>
      <span class="dt">data =</span> data2,               <span class="co"># data frame to add to    </span>
      <span class="dt">well_ids_column =</span> <span class="st">&quot;Wells&quot;</span>,  <span class="co"># name of column of well IDs in data frame</span>
      <span class="dt">plate_size =</span> <span class="dv">96</span>             <span class="co"># total number of wells on the plate (optional)</span>
)

<span class="kw">str</span>(data2)
<span class="co">#&gt; 'data.frame':    96 obs. of  5 variables:</span>
<span class="co">#&gt;  $ Wells        : Factor w/ 96 levels &quot;A01&quot;,&quot;A02&quot;,&quot;A03&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ Killing      : num  98 95 92 41 17 2 1.5 1.8 1 0.5 ...</span>
<span class="co">#&gt;  $ Drug         : chr  &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...</span>
<span class="co">#&gt;  $ Concentration: num  1.00e+02 2.00e+01 4.00 8.00e-01 1.60e-01 3.20e-02 6.40e-03 1.28e-03 2.56e-04 5.12e-05 ...</span>
<span class="co">#&gt;  $ Bacteria     : chr  &quot;E. coli&quot; &quot;E. coli&quot; &quot;E. coli&quot; &quot;E. coli&quot; ...</span>

<span class="kw">head</span>(data2)
<span class="co">#&gt;   Wells Killing Drug Concentration Bacteria</span>
<span class="co">#&gt; 1   A01      98    A       100.000  E. coli</span>
<span class="co">#&gt; 2   A02      95    A        20.000  E. coli</span>
<span class="co">#&gt; 3   A03      92    A         4.000  E. coli</span>
<span class="co">#&gt; 4   A04      41    A         0.800  E. coli</span>
<span class="co">#&gt; 5   A05      17    A         0.160  E. coli</span>
<span class="co">#&gt; 6   A06       2    A         0.032  E. coli</span></code></pre></div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
